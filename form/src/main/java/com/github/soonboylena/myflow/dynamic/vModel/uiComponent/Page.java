package com.github.soonboylena.myflow.dynamic.vModel.uiComponent;import com.fasterxml.jackson.annotation.JsonProperty;import com.github.soonboylena.myflow.dynamic.vModel.AbstractContainer;import com.github.soonboylena.myflow.dynamic.vModel.AbstractContainerDefinition;import com.github.soonboylena.myflow.dynamic.vModel.UiObject;import com.github.soonboylena.myflow.dynamic.vModel.uiAction.UrlObject;import lombok.AllArgsConstructor;import lombok.NoArgsConstructor;import java.util.ArrayList;import java.util.HashMap;import java.util.List;import java.util.Map;public class Page extends AbstractContainer<PageDefinition> {    private transient static final String TYPE = "nPage";    private Map<String, Integer> formCountMap = new HashMap<>();    public Page() {        setDefine(new PageDefinition());    }    public Page(String caption) {        super();        setDefine(new PageDefinition(caption));    }    public Page(String title, String subtitle) {        super();        setDefine(new PageDefinition(title, subtitle));    }    private PageDefinition getDefinition() {        return null != this.getDefine() ? this.getDefine() : new PageDefinition();    }    public void addBtn(Button button) {        getDefinition().addBtn(button);    }    public void addBtn(List<Button> buttons) {        getDefinition().addBtn(buttons);    }    public void setDataUrl(UrlObject dataUrl) {        getDefinition().setDataUrl(dataUrl);    }    public void setStatusUrl(UrlObject statusUrl) {        getDefinition().setStatusUrl(statusUrl);    }    public void setBackUrl(String backUrl) {        getDefinition().setBackUrl(backUrl);    }    public void addForm(Form form) {        String model = form.getDefine().getModel();        Integer count = formCountMap.get(model);        if (count == null) {            formCountMap.put(model, 0);        } else {            form.getDefine().setModel(model + "[" + ++count + "]");            formCountMap.put(model, count);        }        getDefinition().getForms().add(form);    }    @Override    public void addContent(UiObject uiObject) {        if (uiObject instanceof Form) addForm((Form) uiObject);        else super.addContent(uiObject);    }    @Override    public String getType() {        return TYPE;    }}@NoArgsConstructor@AllArgsConstructorclass PageDefinition extends AbstractContainerDefinition {    private String caption;    private String subTitle;    private List<Button> buttons;    @JsonProperty(value = "data_url")    private UrlObject dataUrl;    @JsonProperty(value = "status_url")    private UrlObject statusUrl;    private String backUrl;    private List<Form> forms = new ArrayList<>(3);    public PageDefinition(String caption) {        this.caption = caption;    }    public PageDefinition(String caption, String subtitle) {        this.caption = caption;        this.subTitle = subtitle;    }    public void addBtn(Button button) {        if (null == this.getButtons()) {            this.buttons = new ArrayList<>();        }        this.buttons.add(button);    }    public void addBtn(List<Button> button) {        if (null == this.getButtons()) {            this.buttons = new ArrayList<>();        }        this.buttons.addAll(button);    }    public String getSubTitle() {        return subTitle;    }    public void setSubTitle(String subTitle) {        this.subTitle = subTitle;    }    public List<Button> getButtons() {        return buttons;    }    public void setButtons(List<Button> buttons) {        this.buttons = buttons;    }    public UrlObject getDataUrl() {        return dataUrl;    }    public void setDataUrl(UrlObject dataUrl) {        this.dataUrl = dataUrl;    }    public UrlObject getStatusUrl() {        return statusUrl;    }    public void setStatusUrl(UrlObject statusUrl) {        this.statusUrl = statusUrl;    }    public String getBackUrl() {        return backUrl;    }    public void setBackUrl(String backUrl) {        this.backUrl = backUrl;    }    public List<Form> getForms() {        return forms;    }    public void setForms(List<Form> forms) {        this.forms = forms;    }}