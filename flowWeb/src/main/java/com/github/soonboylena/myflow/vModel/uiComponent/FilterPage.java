package com.github.soonboylena.myflow.vModel.uiComponent;import com.github.soonboylena.myflow.vModel.AbstractDwc;import com.github.soonboylena.myflow.vModel.IUiDefinition;import com.github.soonboylena.myflow.vModel.uiAction.CompRelationAction;import lombok.AllArgsConstructor;import lombok.Data;import lombok.NoArgsConstructor;import java.util.List;/** * @Author: zhao peng * @Date: 2017/10/31 * @Time: 9:30 * @Description: 条件过滤组件 */public class FilterPage extends AbstractDwc<FilterPage.FilterPageDefine> {    private transient static final String TYPE = "mFilterPage";    public transient static final String DEFAULT_TABLE_ID = "tableId";    private boolean popMode = false; // true表示组件在弹出选择时显示用    public FilterPage(CompRelationAction navSelectRelation, CompRelationAction filterRelation, CompRelationAction tableRelation) {        setDefine(new FilterPageDefine(navSelectRelation, filterRelation, tableRelation));        setTablePopMode();    }    public void setDataListName(String dataListName) {        getDefine().getTableRelation().setId(dataListName);    }    @Override    public String getType() {        return TYPE;    }    public void setPopMode(boolean popMode) {        this.popMode = popMode;        setTablePopMode();    }    private void setTablePopMode() {        /**         * TODO:需要优化，把逻辑放到FilterPage里边统一处理         */        CompRelationAction tableRelation = getDefine().getTableRelation();        if (tableRelation != null) {            List<CompRelationAction.AttrLink> dataLink = tableRelation.getDataLink();            for (CompRelationAction.AttrLink attrLink : dataLink) {                if (attrLink.getAttr().equals("tableDefine")) {//                    attrLink.getLink().putQueryPair("popup", String.valueOf(isPopMode()));                }            }        }    }    public boolean isPopMode() {        return popMode;    }    @Data    @NoArgsConstructor    @AllArgsConstructor    public static class FilterPageDefine implements IUiDefinition {        private CompRelationAction navSelectRelation;        private CompRelationAction filterRelation;        private CompRelationAction tableRelation;    }}